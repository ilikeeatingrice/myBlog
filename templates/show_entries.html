{% extends "layout.html" %}
{% block body %}
  {% if session.logged_in %}
    <form action="{{ url_for('add_entry') }}" method=post class=add-entry>
      <dl>
        <dt>Title:
        <dd><input type=text size=30 name=title>
        <dt>Text:
        <dd><textarea name=text ng-model="text" rows=5 cols=40></textarea>
        <dd><input type=submit value=Post>
      </dl>
    </form>
  {% endif %}
  <ul class=entries>
    {{ pagination.links }}
  {% for entry in entries %}
  {% if entry.text|length < 401 %}
    <li><h2 class="entry_title"><a href = "{{url_for('show_entry', entryId=entry.entryId)}}">{{ entry.title }}</a></h2><p class="time">{{entry.time}}</p>{{ text|safe|markdown }}</li>
  <hr size=1>
  {% else %}
  {% set text = entry.text|safe|markdown %}
    <li><h2 class="entry_title"><a href = "{{url_for('show_entry', entryId=entry.entryId)}}">{{ entry.title }}</a></h2><p class="time">{{entry.time}}</p><p class="entry">{{ text[:400]}}</p></li> <p2><a class = "read_more" href = "{{url_for('show_entry', entryId=entry.entryId)}}">Read more...</a></p2>
  <hr size=1>
  {% endif %}
  {% else %}
    <li><em>No entries here...</em>
  {% endfor %}
  </ul>
  {{ pagination.links }}

{% endblock %}